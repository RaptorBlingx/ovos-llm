{% if timeseries_data %}
{# Time-series energy query #}
{{ machine }} consumed {{ total_energy_kwh|round(2) }} kWh from {{ start_time|voice_time }} to {{ end_time|voice_time }}.
{% elif today_stats is defined and today_stats.energy_kwh is defined %}
{# Machine-specific energy from today_stats #}
{{ machine_name }} consumed {{ today_stats.energy_kwh|round(2) }} kilowatt hours today.
{% elif machine and energy_kwh is defined %}
{# Current/today energy query for specific machine #}
{{ machine }} consumed {{ energy_kwh|round(2) }} kWh {{ time_range|default('today') }}.
{% elif total_energy is defined %}
{# Factory-wide energy query #}
The factory has consumed {{ total_energy|round(0) }} kilowatt hours total. Current rate is {{ energy_per_hour|round(0) }} kilowatt hours per hour.
{% else %}
{# Fallback #}
Energy data retrieved{{ " for " + machine if machine else "" }}.
{% endif %}
